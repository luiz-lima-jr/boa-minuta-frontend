<form class="form-usuario" name="form" #formUsuarioT="ngForm"  novalidate  [formGroup]="formUsuario" (ngSubmit)="salvar(formUsuarioT)">
    <div class="title">
        <div class="titleStyleLeft"></div><div class="col-50"><h2>Cadastro de Usuários</h2></div>
    </div>
    <mat-card class="margin-r-2">
        <mat-card-content>
            <mat-form-field class="col-40 margin-r-2">
                <mat-label>Nome Usuário</mat-label>
                <input matInput class="form-control" placeholder="Nome" formControlName="nome">
                <mat-error>
                    Campo obrigatório
                </mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill" class="margin-r-2">
                <mat-label>Filiais</mat-label>
                <mat-select [compareWith]="compareFilial" formControlName="filiais" multiple>
                  <mat-option *ngFor="let filial of filiais" [value]="filial">{{filial.nome}}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field appearance="fill">
                  <mat-label>Funções</mat-label>
                  <mat-select [compareWith]="compareFuncoes" formControlName="funcoes" multiple>
                    <mat-option *ngFor="let funcao of funcoes" [value]="funcao">{{funcao.descricao}}</mat-option>
                  </mat-select>
                </mat-form-field>
        </mat-card-content>
        <mat-card-content>
            <mat-form-field class="col-40 margin-r-2">
                <mat-label>Email</mat-label>
                <input matInput class="form-control" placeholder="Email" formControlName="email">
                <mat-error>
                    Campo obrigatório
                </mat-error>
            </mat-form-field>
            <mat-form-field class="col-20 margin-r-2">
                <mat-label>Situação</mat-label>
                <mat-select formControlName="situacao">
                    <mat-option  [value]="true">Ativo</mat-option>
                    <mat-option  [value]="false">Inativo</mat-option>
                </mat-select>
                <mat-error>
                    Campo obrigatório
                </mat-error>
            </mat-form-field>
            <mat-form-field *ngIf="!formUsuario.controls['id'].value" class="col-20 margin-r-2">
                <mat-label>Senha</mat-label>
                <input matInput class="form-control" placeholder="Senha" formControlName="senha">
                <mat-error>
                    Campo obrigatório
                </mat-error>
            </mat-form-field>
        </mat-card-content>
        <mat-card-footer style="margin: 0.8em 0.8em 1.5em 0.8em">
            <button class="margin-l-2 button-cadastro" mat-flat-button color="primary"> Gravar</button>
            <button class="margin-l-4 button-secundary button-cadastro" mat-flat-button (click)="voltar()"> Voltar</button>
        </mat-card-footer>
    </mat-card>
</form>
<form class="form-usuario">
    <div class="title">
        <div class="titleStyleLeft"></div><div class="col-50"><h2>Usuários Cadastrados</h2></div>
    </div>
    <mat-card class="margin-r-2 tabela-usuarios">
        <table mat-table [dataSource]="usuarios" class="mat-elevation-z8">
            <ng-container matColumnDef="usuario">
                <th mat-header-cell *matHeaderCellDef> Usuário </th>
                <td mat-cell *matCellDef="let usuario"> {{usuario.nome}} </td>
              </ng-container>
              <ng-container matColumnDef="filiais">
                  <th mat-header-cell *matHeaderCellDef> Filiais </th>
                  <td mat-cell *matCellDef="let usuario"> {{getFiliaisLabel(usuario)}} </td>
                </ng-container>
                <ng-container matColumnDef="funcoes">
                    <th mat-header-cell *matHeaderCellDef> Funções </th>
                    <td mat-cell *matCellDef="let usuario"> {{getFuncoesLabel(usuario)}} </td>
                  </ng-container>
            
              <!-- Name Column -->
              <ng-container matColumnDef="acao">
                <th mat-header-cell *matHeaderCellDef > Ações </th>
                <td mat-cell *matCellDef="let usuario">  
                    <button mat-icon-button color="primary" title="Editar Usuário" (click)="editar(usuario)">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="primary" title="Reenviar senha" (click)="reenviarSenha(usuario)">
                        <mat-icon>keyboard</mat-icon>
                    </button>
                    <button mat-icon-button color="primary" title="Excluir Usuário" (click)="excluir(usuario)">
                        <mat-icon>delete</mat-icon>
                    </button>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </mat-card>
</form>